<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Initializing…</title>
<link rel="icon" href="favicon.ico">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1 id="site-name">Initializing…</h1>
</header>

<section id="ai-content">
  <!-- AI-START -->
  <p>Loading AI content...</p>
  <!-- AI-END -->
</section>

<section id="ai-thinking">
  <strong>AI is thinking:</strong>
  <div id="thinking-bar">
    <span id="thinking-text">…</span>
  </div>
</section>

<section id="visitors">
  <strong>Visitors:</strong>
  <p>Online: <span id="online-count">0</span> | Total: <span id="total-count">0</span></p>
</section>

<footer>© 2025 <a href="https://CrowtherTech.name.ng" target="_blank">CrowtherTech</a>. All rights reserved.</footer>

<script>
  // --- WebSocket for AI thinking ---
  const ws = new WebSocket(`ws://${location.host}`);
  const thinkingText = document.getElementById('thinking-text');

  ws.onmessage = (event)=>{
    try{
      const data = JSON.parse(event.data);
      if(data.type==='thinking') {
        thinkingText.textContent = data.text;
      }
    }catch(e){}
  };

  // --- Live visitor counter ---
  async function updateVisitors(){
    try{
      const res = await fetch('/api/visitors');
      const data = await res.json();
      document.getElementById('online-count').textContent = data.online;
      document.getElementById('total-count').textContent = data.total;
    }catch(e){}
  }
  setInterval(updateVisitors, 2000);
  updateVisitors();
</script>
</body>
</html>
