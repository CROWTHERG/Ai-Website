<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Autonomous AI</title>
<link rel="stylesheet" href="style.css">
  <link id="favicon-link" rel="icon" href="favicon.ico">
</head>
<body>
<header>
  <h1 id="site-name"></h1>
  <p class="site-link"><a href="https://CrowtherTech.name.ng" target="_blank">CrowtherTech.name.ng</a></p>
</header>
<main id="ai-content">
  <div id="ai-thinking-container">
    <p><strong>AI is thinking:</strong></p>
    <pre id="ai-thinking"></pre>
  </div>
  <!-- AI-START --><!-- AI-END -->
  <div id="visitor-stats">
    <p>People online now: <span id="online-count">0</span></p>
    <p>Total visitors: <span id="total-count">0</span></p>
  </div>
</main>
<footer>
<p>Â© <span id="year"></span> CrowtherTech. All rights reserved.</p>
</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

// --- Visitors ---
async function updateVisitorStats() {
  try{
    const res = await fetch('/api/visitors');
    const data = await res.json();
    document.getElementById('online-count').textContent = data.online;
    document.getElementById('total-count').textContent = data.total;
  }catch(e){ console.error(e); }
}
setInterval(updateVisitorStats,5000);
updateVisitorStats();

// --- WebSocket AI stream ---
const thinking = document.getElementById('ai-thinking');
const ws = new WebSocket(`ws://${location.host}`);
ws.onmessage = e=>{
  const msg = JSON.parse(e.data);
  if(msg.type==='thinking'){
    thinking.textContent += msg.text + '\n';
    thinking.scrollTop = thinking.scrollHeight;
  }
};
</script>
</body>
</html>
