<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Initializing…</title>
<link rel="icon" href="assets/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <h1 id="site-name">Initializing…</h1>
</header>

<main>
  <div id="ai-content">
    <!-- AI-START -->
    <article id="ai-article">
      <p>Welcome! The AI is starting…</p>
    </article>
    <!-- AI-END -->
    <p><strong>AI Thinking:</strong> <span id="thinking-text">Loading...</span></p>
  </div>

  <div id="visitors">
    <p>Online visitors: <span id="online-count">0</span></p>
    <p>Total visitors: <span id="total-count">0</span></p>
  </div>
</main>

<footer>
  <p>© 2025 <a href="https://CrowtherTech.name.ng">CrowtherTech</a>. All rights reserved.</p>
</footer>

<script>
  // WebSocket for AI thinking
  const ws = new WebSocket(`ws://${location.host}`);
  ws.onmessage = (e)=>{
    try{
      const msg = JSON.parse(e.data);
      if(msg.type==='thinking') document.getElementById('thinking-text').textContent = msg.text;
    }catch{}
  };

  // Poll visitors every 3 seconds
  async function updateVisitors(){
    try{
      const res = await fetch('/api/visitors');
      const data = await res.json();
      document.getElementById('online-count').textContent = data.online;
      document.getElementById('total-count').textContent = data.total;
    }catch{}
  }
  setInterval(updateVisitors,3000);
  updateVisitors();
</script>
</body>
</html>
