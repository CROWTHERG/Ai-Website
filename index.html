<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aurora AI ‚Äî CrowtherTech</title>
  <link rel="icon" href="assets/favicon.ico" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="ai-root">
    <h1>[Initializing Aurora AI]</h1>
    <div id="thinking">AI Thinking...</div>
    <footer>¬© 2025 CrowtherTech. All rights reserved.
CrowtherTech.name.ng</footer>
  </div>

  <script>
    const thinkingEl = document.getElementById('thinking');
    const rootEl = document.getElementById('ai-root');
    const wsUrl = (location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host;
    const ws = new WebSocket(wsUrl);

    ws.onopen = ()=> thinkingEl.textContent = 'üß† Connected to Aurora AI';
    ws.onmessage = (e) => {
      try{
        const msg = JSON.parse(e.data);
        if(msg.type === 'thinking'){
          thinkingEl.textContent = msg.text;
        } else if(msg.type === 'update'){
          // reload the page content (ai may have overwritten files)
          fetch(location.href).then(r => r.text()).then(html=>{
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const newRoot = doc.getElementById('ai-root');
            if(newRoot) rootEl.replaceWith(newRoot);
          });
        }
      }catch(err){ console.error(err); }
    };
    ws.onerror = ()=> thinkingEl.textContent = '‚ö†Ô∏è WS error';
  </script>
</body>
</html>